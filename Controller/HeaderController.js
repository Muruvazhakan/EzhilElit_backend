
 const MyServices = [
    {
      // screen: 'SubScreen',
      screenname:'BridalMakeup',
      topLine:'BridalMakeup',
      
      Display_No:1,
      lightBg:  true,
    lightText: false,
    lightTextDesc: false,
    user_display:'1',
    alt: 'Bridal Makeup',   
    label: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',
    title:'Be Special on you Big-Day!',
    imgStart: 'end',
    img: 'images/svg-1.svg',
    imgcount:12,
    imgurl:`/BridalMakeup/`,
    titleimage:`/BridalMakeup/8.jpg`,
    alt1: 'Bridal Makeup',
    autoplay:"true",
    buttonLabel:"View More",
    url:"BridalMakeup",
    // types:["Bridal Makeup","Puberty Makeup","Baby Shower"],
    types:[{topLine:"Bridal Makeup",subscreenname:"BridalMakeup",Sub_Display_No:1,Sub_TitleImage:`/BridalMakeup/2.jpg`,subLable: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',},
    // {topLine:"Puberty Makeup",titleimage:`/MainSlide/7.jpg`,label: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',},
    {topLine:"Puberty Makeup",subscreenname:"PubertyMakeup",Sub_Display_No:2,Sub_TitleImage:`/BridalMakeup/8.jpg`,subLable: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',},
    {topLine:"Baby Shower",subscreenname:"BabyShower",Sub_Display_No:3,Sub_TitleImage:`/BridalMakeup/9.jpg`,subLable: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',}]
    },
    {
      // screen: 'SubScreen',
      screenname:'Hairstyle',
      topLine:'Hairstyle',
      Display_No:2,
      lightBg: false,
      lightText: true,
      lightTextDesc: true,
      user_display:'1',
      alt: 'Hair style',   
      label: 'Life is more beautiful when you meet the right hairdresser. – Peter Coppola',
      title:'Design with Your deam Hairstyle',
      imgStart: 'start',
      img: 'images/svg-1.svg',
      imgcount:28,    
      imgurl:`/Hairstyle/`,
      titleimage:`/Hairstyle/5.jpg`,
      alt1: 'Trendy Kitchens built with anodize',
      autoplay:"true",
      buttonLabel:"View More",
      url:"Hairstyle",
      types:[{topLine:"Bridas",user_display:'1',subscreenname:"Bridas",Sub_Display_No:1,Sub_TitleImage:`/Hairstyle/5.jpg`,subLable: 'Different types of briads without extensions',},
      {topLine:"Buns",subscreenname:"Buns",Sub_Display_No:2,Sub_TitleImage:`/Hairstyle/6.jpg`,subLable: 'Different types of Buns',},
      {topLine:"Curls",subscreenname:"Curls",Sub_Display_No:3,Sub_TitleImage:`/Hairstyle/7.jpg`,subLable: 'Different types of Curls',}],
    },
    {
      // screen: 'SubScreen',
      screenname:'SareeDrapping',
      topLine:'SareeDrapping',
      Display_No:3,
      user_display:'1',
      lightBg: true,
      lightText: false,
      lightTextDesc: false,
      alt: 'Saree Drapping',   
      label: `A saree is not just a garment. It’s a power, an identity, a language!`,
      title:'It is an outfit that can be worn on almost all occasions.' ,
      imgStart: 'end',
      img: 'images/svg-1.svg',
      imgcount:6,
      imgurl:`/SareeDrapping/`,
      titleimage:`/MainSlide/6.jpg`,
      alt1: 'img',
      autoplay:"true",
      buttonLabel:"View More",
      url:"SareeDrapping",
      types:[
        {topLine:"Traditional Saree Draping",subscreenname:"TraditionalSareeDraping",Sub_Display_No:1,Sub_TitleImage:`/SareeDrapping/3.jpg`,subLable: 'When you feel troubles wrapping up your life, wrap yourself in a saree and fight them in style!',},],
    },
    {
      // screen: 'SubScreen',
      screenname:'SpecialOccation',
      topLine:'SpecialOccation',
      user_display:'1',
      Display_No:4,
      lightBg: false,
      lightText: true,
      lightTextDesc: true,
      alt: 'Special Occation',   
      label: `You will find that makeup with us which help you feel more confident on your Special Occation.`,
      title:'The most important reasons to wear makeup is that it makes you feel more confident.',
      imgStart: 'start',
      img: 'images/svg-1.svg',
      imgcount:5,
      imgurl:`/SpecialOccation/`,
      titleimage:`/MainSlide/2.jpg`,
      alt1: 'img',
      autoplay:"true",
      buttonLabel:"View More",
      url:"SpecialOccation",
      types:[{topLine:"Shoots",subscreenname:"Shoots",Sub_Display_No:1,Sub_TitleImage:`/SpecialOccation/1.jpg`,subLable: 'Every Eye has it Look',},
      {topLine:"Outdoor Paties",subscreenname:"OutdoorPaties",Sub_Display_No:2,Sub_TitleImage:`/SpecialOccation/4.jpg`,subLable: 'Life isn\'T perfect but your Eye Brows can be ',},
    
    ],
    },
    {
      // screen: 'SubScreen',
      screenname:'EzhilAccessories',
      topLine:'EzhilAccessories',
      user_display:'1',
      Display_No:5,
      lightBg: true,
      lightText: false,
      lightTextDesc: false,
      alt: 'Ezhil Accessories',   
      label: `Proper Makeup matching the clothes and accessories will make the models look stunning to the eyes of the customers.`,
      title:'You can find Accessories here.',
      imgStart: '',
      img: 'images/svg-1.svg',
      imgcount:18,
      imgurl:`/EzhilAccessories/`,
      titleimage:`/EzhilAccessories/1.jpg`,
      alt1: 'img',
      autoplay:"true",
      buttonLabel:"View More",
      url:"EzhilAccessories",
      types:[{topLine:"Lens",subscreenname:"Lens",Sub_Display_No:1,Sub_TitleImage:`/EzhilAccessories/1.jpg`,subLable: 'Every Eye has it Look',},
    {topLine:"Lashes",subscreenname:"Lashes",Sub_Display_No:2,Sub_TitleImage:`/EzhilAccessories/4.jpg`,subLable: 'Life isn\'T perfect but your Eye Brows can be ',},
    {topLine:"Hair Spray",subscreenname:"Hair Spray",Sub_Display_No:3,Sub_TitleImage:`/EzhilAccessories/3.jpg`,subLable: 'Inner Beauty is Great but a little Hairspray never Hurts!',},
    {topLine:"Dust Powder",subscreenname:"DustPowder",Sub_Display_No:4,Sub_TitleImage:`/EzhilAccessories/2.jpg`,subLable: 'Love of beauty is taste. The creation of beauty is art. – Ralph Waldo Emerson',}],
    },
  
  
  ]

const { default: mongoose } = require('mongoose');
  const Service = require('../DbTablesSchema/Services');
const HttpError = require('../DbTablesSchema/httpError');
  const getHeaderdetails = async (req,res,next) =>{

     let resp ;

     try{
      resp = await Service.find({});
      console.log("resp data "+ resp);
     }catch(er){
      next (new HttpError((er),244));
     }
     if(!resp)
      res.status(400).json({message:"No Data found"});
    res.status(200).json(resp);
  }

  const getSelectedHeaderdetails = async (req,res,next) =>{
    var header = req.params.headerid;
    let selectedHeader;
    //  selectedHeader = MyServices.filter((myservice,id) =>{
    //   return myservice.screenname == header
    // });

    try{
      selectedHeader = await Service.find({topLine:header});
      // console.log(selectedHeader.length + ' selected Header ');

    }catch(er) {
      next (new HttpError((e),244));
    }

    if(!selectedHeader)
      res.status(400).json({message:"No Data found"});
    // console.log(selectedHeader);
    res.status(200).json(selectedHeader);
  }
  

  const createServiceDetails = async (req,res,next) =>{
    
    const { screenname, topLine, Display_No, lightBg, lightText,
    lightTextDesc, user_display, alt, label, title, imgStart, img, imgcount, imgurl, titleimage, alt1, autoplay, buttonLabel, url
      ,types} = req.body;
    const newServices = new Service({

    screenname,
    topLine,
    
    Display_No,
    lightBg,
  lightText,
  lightTextDesc,
  user_display,
  alt,   
  label,
  title,
  imgStart,
  img,
  imgcount,
  imgurl,
  titleimage,
  alt1,
  autoplay,
  buttonLabel,
  url,types
    });

    let service;

    // try{
    //   service = await Service.findById(topLine);
    // }catch(er){
    //   const err = new HttpError(('Issue on creator found',er),400);
    //   return next(err);
    // }
    // console.log(' service '+ service);

    // if(!service)
    //   return new HttpError (('No user found'),400);

    try{
      // const sess = await mongoose.startSession();
      // sess.startTransaction();
      // await newServices.save({session:sess});
      await newServices.save();

    } catch(er){
      return next('Error code'+er,404);
    }
    console.log(" new Service " + newServices);

    res.status(201).json({message:" Service Created"});
  }

  module.exports.getHeaderdetails = getHeaderdetails;
  module.exports.getSelectedHeaderdetails = getSelectedHeaderdetails;
  module.exports.createServiceDetails=createServiceDetails;